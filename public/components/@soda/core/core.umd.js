(function(o,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("react"),require("antd"),require("mobx"),require("mobx-react"),require("axios")):typeof define=="function"&&define.amd?define(["exports","react","antd","mobx","mobx-react","axios"],i):(o=typeof globalThis<"u"?globalThis:o||self,i(o.sodaCore=o.sodaCore||{},o.window.React,o.window.antd,o.window.mobx,o.window.mobxReact,o.axios))})(this,function(o,i,u,l,m,O){"use strict";var W=Object.defineProperty;var I=(o,i,u)=>i in o?W(o,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[i]=u;var s=(o,i,u)=>I(o,typeof i!="symbol"?i+"":i,u);function v(n){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const e in n)if(e!=="default"){const t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:()=>n[e]})}}return r.default=n,Object.freeze(r)}const P=v(u);var b={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=i,j=Symbol.for("react.element"),D=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,S=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function g(n,r,e){var t,a={},d=null,c=null;e!==void 0&&(d=""+e),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(c=r.ref);for(t in r)_.call(r,t)&&!R.hasOwnProperty(t)&&(a[t]=r[t]);if(n&&n.defaultProps)for(t in r=n.defaultProps,r)a[t]===void 0&&(a[t]=r[t]);return{$$typeof:j,type:n,key:d,ref:c,props:a,_owner:S.current}}f.Fragment=D,f.jsx=g,f.jsxs=g,b.exports=f;var p=b.exports;function T(n=16,r=""){const e=[];for(let t=0;t<n/4;t++)e.push((Math.random()*1e6>>0).toString(36));return e.join(r)}class y extends i.Component{constructor(){super(...arguments);s(this,"state",{})}setState(){throw new Error("setState is not allowed")}componentDidCatch(e,t){console.log(e,t)}}class E extends y{constructor(){super(...arguments);s(this,"children",[]);s(this,"dragStartX",0);s(this,"dragStartY",0);s(this,"current");s(this,"componentRefMap",{});s(this,"onDrop",e=>{e.preventDefault();const t=JSON.parse(e.dataTransfer.getData("componentMeta"));(this.props.getWhiteList??(()=>!0))(t)&&this.children.push({...t,id:T()}),console.log(e)});s(this,"onDragOver",e=>{this.current||(e.preventDefault(),e.dataTransfer.dropEffect="move")});s(this,"initDesignComponent",e=>{});s(this,"onPointerDown",e=>{if(this.initDesignComponent(e.target),!this.current)return;const{clientX:t,clientY:a}=e,{offsetLeft:d,offsetTop:c}=e.target;this.dragStartX=t-d,this.dragStartY=a-c,console.log(e)});s(this,"onPointerUp",e=>{this.current=null});s(this,"onPointerMove",e=>{this.current&&console.log(e,111e3)})}render(){var c;const{placeholder:e="拖拽组件到此",className:t="",dropDisabled:a,...d}=this.props;return p.jsx("div",{onDrop:a?null:this.onDrop,onDragOver:a?null:this.onDragOver,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,...d,className:`default-page ${t}`,children:((c=this.children)==null?void 0:c.length)>0?this.children.map(h=>{const{componentName:N,id:$}=h,k=P[h.componentName]??(()=>p.jsxs("div",{children:[N,"组件不存在"]}));return p.jsx(k,{ref:L=>this.componentRefMap[$]=L,children:"按钮"},h.id)}):p.jsx("div",{className:"default-page-containerEmpty",children:p.jsx("div",{className:"default-page-containerPlaceholder",children:e})})})}}class x{render(){throw new Error("Method not implemented.")}}function C(n){return m.observer.call(n,n),class extends n{constructor(e){super(e),l.makeObservable(this)}}}async function q(n){return n.status===200?n.data.code===200?n.data.data:n.data:n}class U{constructor(r="",e=q){this.baseUrl=r,this.responseHandler=e}async request(r,e){e.headers||(e.headers={}),e.headers["origin-url"]=r;const t=await O("/soda-app",e);return this.responseHandler(t)}get(r,e={},t={}){return this.request(`${this.baseUrl}${r}`,{method:"GET",...t,params:e})}delete(r,e={},t={}){return this.request(`${this.baseUrl}${r}`,{method:"DELETE",...t,data:e})}post(r,e={},t={}){return this.request(`${this.baseUrl}${r}`,{method:"POST",...t,data:e})}put(r,e={},t={}){return this.request(`${this.baseUrl}${r}`,{method:"PUT",...t,data:e})}upload(r,e={},t={}){const a={"Content-Type":"multipart/form-data"};return this.request(`${this.baseUrl}${r}`,{method:"POST",...t,data:e,headers:a})}}function M(n,r){return new U(n,r)}Object.defineProperty(o,"action",{enumerable:!0,get:()=>l.action}),Object.defineProperty(o,"computed",{enumerable:!0,get:()=>l.computed}),Object.defineProperty(o,"makeObservable",{enumerable:!0,get:()=>l.makeObservable}),Object.defineProperty(o,"reactive",{enumerable:!0,get:()=>l.observable}),Object.defineProperty(o,"Provider",{enumerable:!0,get:()=>m.Provider}),o.Component=y,o.Container=E,o.ReactRenderer=x,o.Widget=C,o.createRequest=M,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
