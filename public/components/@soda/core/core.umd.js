(function(s,a){arguments[0]["sodaCore"] = {"version":"1.0.0"}; typeof exports=="object"&&typeof module<"u"?a(exports,require("react"),require("mobx"),require("mobx-react"),require("axios")):typeof define=="function"&&define.amd?define(["exports","react","mobx","mobx-react","axios"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s.sodaCore=s.sodaCore||{},s.window.React,s.window.mobx,s.window.mobxReact,s.axios))})(this,function(s,a,d,g,m){"use strict";var H=Object.defineProperty;var G=(s,a,d)=>a in s?H(s,a,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[a]=d;var C=(s,a,d)=>G(s,typeof a!="symbol"?a+"":a,d);var j={exports:{}},h={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T=a,v=Symbol.for("react.element"),O=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,E=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function x(r,e,t){var n,o={},l=null,c=null;t!==void 0&&(l=""+t),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)R.call(e,n)&&!S.hasOwnProperty(n)&&(o[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:v,type:r,key:l,ref:c,props:o,_owner:E.current}}h.Fragment=O,h.jsx=x,h.jsxs=x,j.exports=h;var i=j.exports;class p extends a.Component{constructor(){super(...arguments);C(this,"state",{})}get __mode(){return this.props.__mode}setState(){throw new Error("setState is not allowed")}componentDidCatch(t,n){console.log(t,n)}}class _ extends p{get canDesign(){return this.props.mode==="DESIGN"}render(){const{placeholder:e="拖拽组件到此",className:t="",style:n}=this.props,{children:o}=this.props;return this.canDesign?i.jsx("div",{style:n,className:`${t}`,children:(o==null?void 0:o.length)>0?o:i.jsx("div",{className:"default-page-containerEmpty",children:i.jsx("div",{className:"default-page-containerPlaceholder",children:e})})}):i.jsx(i.Fragment,{children:o})}}class ${render(){throw new Error("Method not implemented.")}}function U(r){return g.observer.call(r,r),class extends r{constructor(e){super(e),d.makeObservable(this)}}}async function q(r){return r.status===200?r.data.code===200?r.data.data:r.data:r}class N{constructor(e="",t=q,n=!0){this.baseUrl=e,this.responseHandler=t,this.useProxy=n}async request(e,t){t.headers||(t.headers={}),t.headers["origin-url"]=e;const n=this.useProxy?await m("/soda-app",t):await m(e,t);return this.responseHandler(n)}get(e,t={},n={}){return this.request(`${this.baseUrl}${e}`,{method:"GET",...n,params:t})}delete(e,t={},n={}){return this.request(`${this.baseUrl}${e}`,{method:"DELETE",...n,data:t})}post(e,t={},n={}){return this.request(`${this.baseUrl}${e}`,{method:"POST",...n,data:t})}put(e,t={},n={}){return this.request(`${this.baseUrl}${e}`,{method:"PUT",...n,data:t})}upload(e,t={},n={}){const o={"Content-Type":"multipart/form-data"};return this.request(`${this.baseUrl}${e}`,{method:"POST",...n,data:t,headers:o})}}function M(r,{responseHandler:e,useProxy:t}={}){return new N(r,e,t)}const k=m;function D(r){const e=r.match(/^@([^/]+)/);let t="";e&&(t=e[1].toLowerCase(),r=r[t.length+2].toUpperCase()+r.slice(t.length+3));const n=r.split(/-/).map((o,l)=>l===0&&t.length===0?o.toLowerCase():o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("");return t?`${t}${n}`:n}function L(r){return(r==null?void 0:r.length)>0?r.split(".")[0]:"1"}class P extends p{render(){const{children:e}=this.props;return i.jsx("div",{className:"default-page",children:e})}}class W extends p{constructor(){super(...arguments);C(this,"refsMap",{})}get $refs(){return this.refsMap}getComponent(t,n){const o=({package:u,version:f,componentName:y})=>{const b=D(u)+L(f);return n[b][y]},l=this.props.schema.components.find(({componentName:u})=>t===u);let c=l?o(l):null;return c||(t==="Page"?c=P:c=a.forwardRef(()=>i.jsxs("div",{children:[t,"组件不存在"]}))),c}schemasToComponent(t,n=this.props.componentMap){return t.map(o=>{const{componentName:l,id:c,children:u,props:f={},advanced:{isContainer:y=!0}={isContainer:!0}}=o,b=this.getComponent(l,n),w=Array.isArray(u)?this.schemasToComponent(u,n):null;return i.jsx(b,{id:c,...f,ref:I=>this.refsMap[c]=I,children:y?i.jsx(_,{children:w}):w},c)})}}class A extends W{render(){const{componentsTree:e}=this.props.schema;return i.jsx(i.Fragment,{children:this.schemasToComponent(e)})}}class F extends p{}Object.defineProperty(s,"action",{enumerable:!0,get:()=>d.action}),Object.defineProperty(s,"computed",{enumerable:!0,get:()=>d.computed}),Object.defineProperty(s,"makeObservable",{enumerable:!0,get:()=>d.makeObservable}),Object.defineProperty(s,"reactive",{enumerable:!0,get:()=>d.observable}),Object.defineProperty(s,"Provider",{enumerable:!0,get:()=>g.Provider}),s.Component=p,s.Container=_,s.Page=P,s.ReactRenderer=$,s.TypeEditor=F,s.WebRender=A,s.Widget=U,s.axios=k,s.createRequest=M,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
